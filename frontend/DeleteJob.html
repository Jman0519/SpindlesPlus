<!-- ask basic questions like

reason - date - employee - Mike/Jenifer notified

Clear from the job board after this has been submitted -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spindles Plus Internal Job Board</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <header>
        <h1>Delete Job</h1>
    </header>
    <main>
        <section class="cta">
            <div class="input-group">
                <label for="Reason for Deleteing Job">Reason for Deleting Job</label>
                <textarea id="Reason" placeholder="Reason" required></textarea>
            </div>

            <div class="input-group">
                <label for="Date">Date</label>
                <input type="date" class="default-today" id="Date" placeholder="Received Date" required>
            </div>

            <div class="input-group">
                <label for="Employee Name">Employee Name</label>
                <input type="text" id="employeeName" placeholder="First and Last Name" required>
            </div>

            <div class="input-group">
                <label for="Notified">Have Mike and Jenifer Been Notified?</label>
                <select id="tearDown" placeholder="Tear Down Required?" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="Y">Yes</option>
                    <option value="N">No</option>
                </select>
            </div>

            <button id="cancel" type="submit">Cancel</button>
            <button id="deleteJob" type="submit" style="background-color: red;">Delete Job</button>

            <script>
                function confirm(string) {
                    var userInput = prompt("Type the following to confirm: " + string);

                    if (userInput === string) {
                        return true;
                    } else {
                        return false;
                    }
                }
            </script>

            <script>
                let cancelButton = document.getElementById("cancel");
                cancelButton.onclick = function () {
                    window.location.href = "/EditJob.html";
                }
            </script>

            <script>
                let deleteJobButton = document.getElementById("deleteJob");
                deleteJobButton.onclick = function () {
                    let job = JSON.parse(window.localStorage.getItem("job"));
                    if (confirm(job["Customer Name"]) == false) {
                        return;
                    }

                    fetch("/deleteJob", {
                        method: "POST",
                        body: JSON.stringify(job),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    });
                    window.location.href = "/";
                }
            </script>

            <!-- Add this script after your existing script or in the head section -->
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    // Get today's date in the format "YYYY-MM-DD"
                    let today = new Date().toISOString().split('T')[0];

                    // Set the default value for date input fields with the class "default-today"
                    let dateInputs = document.querySelectorAll(".default-today");
                    dateInputs.forEach(function (input) {
                        input.value = today;
                    });
                });
            </script>
        </section>
    </main>
    <footer>
        <p>&copy; 2023 Spindles Plus Incorporated | All Rights Reserved |
            <a href="JobBoard.html">Job Board</a> |
            <a href="CreateNewJob.html">Create New Job</a>
        </p>
    </footer>
</body>

</html>